<nav-menu></nav-menu>

<div class="jumbotron">
    <div class="row">
        <div class="col-md-8">
            <div class="map-container">
                <img class="mapper" src="img/mappa_italia.png" border="0" usemap="#mappa_italia" alt="Mappa Italia"/>
                <a class="cite" href="http://it.wikipedia.org/wiki/File:Circ_elett.png">
                    <span>Fonte: Wikipedia Licenza CC 3.0</span>
                </a>
            </div>
            <div class="row table-container homelist-container">
                <table class="table table-hover">
                    <caption>Circoscrizioni</caption>
                    <tr ng-repeat="collegio in collegio">
                        <td>
                            <a href="" class="collegio-text" ng-click="goToCollegio(collegio.id)">{{collegio.desc}}</a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-md-4 ">
            <div class="row">
                <form ng-submit="deputatoSearch()">
                    <div class="input-group">
                        <input type="text"
                               class="form-control"
                               ng-model="selected_deputato"
                               placeholder="Cerca Deputato"
                               typeahead="deputato as deputato.desc for deputato in deputato_list | filter:$viewValue | limitTo: 12" >
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="submit">
                                <span class="glyphicon glyphicon-search"></span>
                            </button>
                        </span>
                    </div>
                </form>
            </div>

            <div class="row table-container">
                <div class="help-container">
                    <a href="./help.pdf" target="_blank">
                        <i class="fa fa-question-circle fa-3x"></i>
                    </a>
                </div>
                <h3>Benvenuti!</h3>
                <p class="welcome-text">
                    Camera4Dummies apre le porte della Camera dei Deputati a tutti, rendendo fruibili i dati riguardanti i nostri rappresentanti
                    politici.  Con pochi click è possibile 'scavare' nell'attività parlamentare per scendere ancor più nel dettaglio. Leggi,
                    Atti, Schede dei Deputati... Tutto a portata di click!
                </p>
                <p class="welcome-text">
                    <h5>Scegli una circoscrizione per iniziare</h5>
                </p>
            </div>
            <div class="row table-container">
                <table class="table table-hover">
                    <caption>Circoscrizioni Estere</caption>
                    <tr ng-repeat="collegio in collegioOther">
                        <td>
                            <a href="" class="collegio-text" ng-click="goToCollegio(collegio.id)">{{collegio.desc}}</a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="row">
        <a href="//play.google.com/store/apps/details?id=ora.camera4dummies.camera4dummiesandroid&hl=it" target="_blank"><img src="img/en_app_rgb_wo_45.png" /></a>
    </div>

</div>

<map name="mappa_italia">
    <area shape="poly" ng-click="goToCollegio('TRENTINO-ALTO ADIGE')" alt="Trentino-Alto Adige" set-nav-text
          coords="150,16,146,24,147,30,152,30,151,35,151,37,156,39,156,43,152,44,154,51,153,61,151,63,152,70,155,76,165,73,167,74,168,76,169,79,176,78,179,74,183,66,187,63,190,62,193,62,197,63,197,56,206,54,208,50,204,47,200,43,204,37,200,34,208,31,212,24,217,27,224,26,225,24,221,17,220,13,213,9,213,6,217,3,215,0,207,4,202,7,198,9,191,6,186,9,181,8,174,11,173,17,171,20,167,20,162,18,159,14,150,16"/>

    <area shape="poly" ng-click="goToCollegio('FRIULI-VENEZIA GIULIA')" alt="Friuli-Venezia Giulia" set-nav-text
          coords="238,24,237,30,235,33,231,33,228,39,223,46,229,53,230,55,227,58,226,63,230,65,233,70,237,72,243,69,247,68,251,73,254,78,259,75,263,75,267,76,271,74,271,71,274,72,280,81,284,81,287,78,280,72,273,69,274,64,273,60,269,60,266,58,276,51,275,48,267,46,263,45,265,41,271,38,275,35,275,29,267,27,261,28,255,28,248,27,241,26,238,24"/>

    <area shape="poly" ng-click="goToCollegio('VENETO 2')" alt="Veneto 2" set-nav-text
          coords="198,62,204,67,202,72,205,76,206,82,210,81,214,79,216,82,213,88,212,94,214,97,216,98,220,101,219,106,214,107,212,108,215,111,218,111,224,109,225,97,229,93,240,87,248,81,254,80,249,71,241,69,237,72,230,69,227,63,225,57,230,53,221,47,223,43,227,39,230,33,234,34,237,30,238,24,227,23,224,27,217,27,211,25,210,31,201,34,204,38,201,42,209,52,202,55,198,56,197,62,198,62"/>

    <area shape="poly" ng-click="goToCollegio('VENETO 1')" alt="Veneto 1" set-nav-text
          coords="224,122,226,126,228,129,234,121,235,117,229,115,226,112,224,108,221,110,218,113,215,112,211,109,211,106,215,106,219,105,220,100,216,98,212,96,212,89,214,85,215,81,211,80,208,82,205,79,204,75,202,71,202,66,198,62,195,64,193,61,188,62,186,64,183,66,180,70,179,75,176,79,173,79,170,80,166,78,168,75,165,72,163,75,160,81,157,84,158,90,159,94,160,99,163,102,169,106,173,110,176,112,182,116,186,119,190,121,198,123,205,119,212,118,217,120,220,121,224,122"/>

    <area shape="poly" ng-click="goToCollegio('LOMBARDIA 2')" alt="Lombardia 2" set-nav-text
          coords="83,57,83,64,79,70,78,75,76,77,80,84,84,89,88,87,93,86,96,87,97,81,103,81,104,78,107,81,114,83,116,86,117,92,119,93,125,94,128,94,130,100,135,103,141,106,148,105,151,100,151,95,155,96,158,98,158,95,157,85,164,73,160,73,155,76,151,73,151,66,150,61,153,58,153,52,154,47,151,44,156,42,155,37,151,37,148,35,142,32,138,30,136,34,136,38,138,41,138,44,137,47,139,49,137,52,135,51,134,49,131,44,128,43,122,47,115,47,113,44,111,39,106,36,104,40,106,47,102,53,97,59,95,62,95,65,97,70,95,74,92,73,91,69,87,65,89,61,83,57"/>

    <area shape="poly" ng-click="goToCollegio('LOMBARDIA 1')" alt="Lombardia 1" set-nav-text
          coords="84,90,87,98,90,101,95,104,103,104,109,100,111,94,116,92,116,86,113,83,108,82,105,79,102,81,97,81,97,87,92,85,92,88,86,87,84,88,84,90"/>

    <area shape="poly" ng-click="goToCollegio('LOMBARDIA 3')" alt="Lombardia 3" set-nav-text
          coords="77,100,75,104,78,111,81,116,84,118,90,117,92,122,98,132,102,133,106,135,108,130,109,128,106,124,109,115,118,111,121,114,130,113,132,111,140,117,143,117,150,119,155,122,162,119,170,122,176,120,188,120,178,115,176,112,171,109,167,105,162,102,159,100,155,98,150,103,148,108,141,106,129,101,129,97,124,96,120,95,115,94,111,96,108,102,100,104,94,104,87,99,84,99,84,104,80,101,77,100"/>

    <area shape="poly" ng-click="goToCollegio('VALLE D\'AOSTA')" alt="Valle d'Aosta" set-nav-text
          coords="52,84,49,86,45,88,42,86,39,86,34,86,31,89,28,91,22,91,19,92,16,91,15,86,16,83,10,80,9,77,9,72,15,70,18,67,22,70,26,70,32,68,40,64,46,67,50,67,52,74,52,78,52,84"/>

    <area shape="poly" ng-click="goToCollegio('PIEMONTE 1')" alt="Piemonte 1" set-nav-text
          coords="19,135,17,134,17,129,13,126,10,127,6,124,6,119,4,117,2,115,0,113,6,109,12,110,14,107,18,106,22,104,22,101,24,97,19,93,22,91,29,91,36,87,39,86,46,88,49,86,51,86,51,91,56,95,56,100,54,104,55,107,60,110,58,113,50,113,51,118,51,126,51,128,40,129,33,130,25,130,19,135"/>

    <area shape="poly" ng-click="goToCollegio('PIEMONTE 2')" alt="Piemonte 2" set-nav-text
          coords="44,169,40,165,31,168,21,163,15,162,10,154,11,145,14,138,23,133,28,131,41,130,51,128,54,118,52,114,60,111,59,109,56,107,54,101,56,94,52,90,52,77,51,67,54,62,58,61,61,58,63,54,60,49,63,47,69,41,73,39,75,43,75,52,83,59,84,62,79,70,79,75,76,77,81,84,83,88,85,95,88,99,85,99,84,102,81,102,77,100,75,104,77,109,80,117,86,119,91,118,94,124,98,132,101,132,104,136,104,140,104,142,92,137,90,141,90,144,85,143,79,144,75,146,70,147,65,146,64,152,57,159,58,164,44,169"/>

    <area shape="poly" ng-click="goToCollegio('LIGURIA')" alt="Liguria" set-nav-text
          coords="136,172,128,170,127,171,120,167,108,158,103,157,101,158,99,154,88,153,81,152,75,156,73,161,71,166,65,168,63,174,60,179,51,184,40,187,35,186,33,181,36,177,42,171,43,167,47,166,51,168,56,166,58,164,58,157,63,152,64,146,69,147,73,146,77,145,80,142,83,142,89,143,90,139,92,137,97,138,102,141,109,142,113,144,113,147,112,151,118,151,124,155,131,163,135,168,136,172"/>

    <area shape="poly" ng-click="goToCollegio('EMILIA-ROMAGNA')" alt="Emilia-Romagna" set-nav-text
          coords="244,178,241,181,235,177,229,178,224,184,215,184,206,180,199,174,204,166,194,162,190,160,182,166,172,168,163,164,159,166,152,161,143,159,133,149,127,149,122,154,117,150,113,150,114,144,110,141,103,139,104,136,108,133,109,128,105,123,107,121,110,116,118,113,125,114,133,112,137,117,143,118,149,120,156,123,162,119,174,122,181,121,190,120,199,122,204,119,215,119,223,120,225,124,224,127,223,137,225,145,226,152,229,157,229,160,235,166,244,173,244,178"/>

    <area shape="poly" ng-click="goToCollegio('TOSCANA')" alt="Toscana" set-nav-text
          coords="195,263,186,261,183,265,179,262,184,254,176,246,166,242,166,235,160,233,154,233,154,229,156,216,147,202,144,183,136,171,136,167,132,166,123,156,127,149,133,149,137,156,142,159,150,161,158,168,165,166,171,170,184,169,190,163,196,165,203,167,199,173,206,181,211,184,219,188,227,187,227,189,222,192,222,196,218,199,219,202,216,206,222,213,215,216,212,222,214,228,214,235,206,238,208,245,209,248,199,253,200,258,195,263"/>

    <area shape="poly" ng-click="goToCollegio('MARCHE')" alt="Marche" set-nav-text
          coords="295,229,290,215,282,196,277,191,269,188,253,176,245,173,244,179,239,181,231,178,227,183,228,189,223,194,232,197,241,204,246,203,251,215,255,228,259,233,267,234,272,240,279,236,295,229"/>

    <area shape="poly" ng-click="goToCollegio('UMBRIA')" alt="Umbria" set-nav-text
          coords="240,261,233,254,229,253,227,246,217,243,215,238,216,227,214,220,225,212,218,206,221,202,224,196,228,197,228,200,236,199,241,205,245,205,252,218,252,227,256,234,264,235,267,236,265,240,264,245,252,248,247,254,240,261"/>

    <area shape="poly" ng-click="goToCollegio('LAZIO 2')" alt="Lazio 2" set-nav-text
          coords="207,274,201,267,195,263,196,260,202,257,200,254,210,247,208,240,212,237,216,241,213,244,226,247,228,254,233,256,239,262,252,250,265,245,266,240,270,241,272,242,273,244,265,250,264,256,266,262,271,269,273,271,270,272,262,272,257,275,250,271,244,272,240,265,234,272,227,272,221,275,214,269,210,275"/>

    <area shape="poly" ng-click="goToCollegio('LAZIO 1')" alt="Lazio 1" set-nav-text
          coords="249,313,245,313,235,302,229,298,225,290,215,282,212,282,207,275,211,274,214,270,219,276,226,273,233,274,239,267,244,269,243,273,249,272,256,276,263,273,262,280,270,284,260,292,260,296,266,302,262,304,255,297,251,303,247,304,245,300,241,305,249,313"/>

    <area shape="poly" ng-click="goToCollegio('LAZIO 2')" alt="Lazio 2" set-nav-text
          coords="294,324,284,322,284,325,274,320,264,324,257,316,252,314,252,314,243,306,250,304,256,299,264,305,267,301,261,296,265,290,271,284,275,290,275,290,284,293,289,292,300,299,302,310,297,314"/>

    <area shape="poly" ng-click="goToCollegio('ABRUZZO')" alt="Abruzzo" set-nav-text
          coords="334,274,331,268,319,261,303,246,295,230,282,235,273,241,273,247,266,248,263,258,272,269,273,272,263,273,261,279,265,281,274,285,276,290,285,294,288,290,301,297,310,291,309,286,313,283,323,290,334,274"/>

    <area shape="poly" ng-click="goToCollegio('MOLISE')" alt="Molise" set-nav-text
          coords="347,279,346,289,349,294,342,297,341,306,333,310,326,313,309,308,304,312,302,307,302,298,308,292,308,289,313,285,322,292,334,274,347,279"/>

    <area shape="poly" ng-click="goToCollegio('CAMPANIA 1')" alt="Campania 1" set-nav-text
          coords="305,339,306,347,318,344,325,345,324,349,317,355,321,359,332,354,331,334,327,332,304,338"/>

    <area shape="poly" ng-click="goToCollegio('CAMPANIA 2')" alt="Campania 2" set-nav-text
          coords="372,381,377,382,379,375,382,370,372,359,365,348,361,338,367,335,368,327,357,325,353,320,353,318,346,313,344,306,334,310,328,313,316,309,307,308,308,313,305,314,302,312,298,313,299,320,296,323,300,331,303,338,314,334,320,332,331,331,333,339,332,345,332,353,339,351,350,367,344,376,365,388"/>

    <area shape="poly" ng-click="goToCollegio('PUGLIA')" alt="Puglia" set-nav-text
          coords="428,358,433,351,440,352,445,354,443,359,457,363,471,360,478,369,481,379,493,386,495,378,499,368,497,363,494,359,485,350,478,347,476,343,464,337,454,334,443,327,434,321,421,318,405,313,383,304,381,297,385,291,393,284,389,276,379,277,367,278,360,282,348,281,347,290,349,294,343,299,341,299,344,306,348,310,348,314,355,318,353,323,356,325,369,327,378,323,386,322,390,327,389,332,398,332,402,338,406,343,413,340,419,342,420,350,422,355,428,358"/>

    <area shape="poly" ng-click="goToCollegio('BASILICATA')" alt="Basilicata" set-nav-text
          coords="362,338,362,341,364,347,368,353,372,360,382,370,379,374,378,382,382,388,386,383,393,384,396,388,407,386,409,376,420,373,426,360,421,356,420,344,411,342,406,346,396,334,388,333,388,326,381,323,370,326,371,333,368,338,362,338"/>

    <area shape="poly" ng-click="goToCollegio('CALABRIA')" alt="Calabria" set-nav-text
          coords="420,376,410,376,409,380,408,386,407,388,402,388,399,389,394,389,393,387,393,385,386,385,382,389,384,395,387,405,389,410,394,415,398,423,399,430,402,439,405,443,407,446,406,452,404,455,400,455,396,458,391,460,391,461,394,465,395,470,393,475,391,480,387,482,384,484,385,490,384,492,386,494,385,496,387,499,391,501,396,500,400,501,405,499,407,495,408,487,414,479,420,476,426,469,422,453,426,447,434,442,439,441,442,442,445,441,448,439,449,433,446,433,444,430,446,425,444,421,445,414,439,409,428,403,420,403,417,401,416,397,415,393,420,384,418,380"/>

    <area shape="poly" ng-click="goToCollegio('SICILIA 2')" alt="Sicilia 2" set-nav-text
          coords="332,558,334,561,336,563,338,567,342,568,346,569,348,571,352,572,356,570,360,571,363,571,365,573,367,573,369,571,367,566,368,561,370,557,373,554,376,552,374,550,374,546,370,544,369,541,372,540,370,537,364,536,364,531,365,526,367,521,368,517,368,514,369,509,380,491,382,486,383,483,384,482,379,480,374,483,366,486,361,492,358,490,354,490,352,488,349,490,345,490,343,493,340,495,336,497,332,497,330,498,327,499,322,500,320,499,325,504,325,506,325,512,327,515,324,518,320,519,320,527,321,530,318,534,319,538,325,538,331,540,332,544,335,546,337,550,335,551,336,554,331,556"/>

    <area shape="poly" ng-click="goToCollegio('SICILIA 1')" alt="Sicilia 1" set-nav-text
          coords="260,494,255,493,256,499,254,497,252,499,248,502,247,506,246,510,247,513,245,515,247,521,248,523,252,524,256,529,263,527,269,528,272,532,279,532,283,537,291,542,296,543,301,548,308,550,312,553,319,551,324,552,328,554,331,558,334,554,336,553,335,551,338,549,335,545,333,545,333,541,327,537,324,538,320,538,318,535,322,531,321,525,322,521,322,520,327,517,328,514,326,509,326,506,321,501,320,499,317,499,313,499,310,500,304,503,300,502,294,499,293,496,291,496,288,497,286,496,285,492,282,491,279,493,276,493,272,493,271,496,272,498,270,499,265,502,264,500,261,498,260,496,260,494"/>

    <area shape="poly" ng-click="goToCollegio('SARDEGNA')" alt="Sardegna" set-nav-text
          coords="61,346,59,360,59,362,58,362,58,366,61,363,61,365,64,364,65,364,65,367,66,369,68,369,68,376,68,377,71,380,72,380,72,382,71,388,72,391,71,393,69,394,69,396,68,397,68,401,69,402,70,403,71,403,73,402,74,403,75,405,75,408,74,409,73,411,73,412,72,410,71,410,71,413,70,414,70,414,70,417,71,417,72,419,71,420,70,423,68,425,68,426,68,427,69,428,68,429,68,431,67,431,68,433,69,433,70,435,69,437,68,438,66,439,67,441,68,441,69,443,70,444,70,445,71,446,71,447,71,449,73,449,75,450,75,450,76,451,75,452,75,453,76,454,77,454,78,456,77,458,78,458,80,458,80,457,81,456,83,456,84,457,85,458,86,458,87,459,89,457,90,457,92,455,93,454,94,453,95,451,96,449,95,444,96,442,98,440,99,440,100,442,101,441,102,440,105,440,107,440,108,441,110,443,112,444,114,445,116,445,118,444,119,442,119,439,120,437,121,435,120,432,122,428,122,426,122,423,122,421,122,418,122,415,123,413,123,408,124,406,123,402,124,400,124,397,125,392,122,388,120,383,122,379,124,377,127,375,127,373,129,369,129,367,127,365,126,362,126,360,126,358,124,357,124,355,123,353,123,353,123,352,123,350,123,349,122,348,121,347,120,346,118,346,118,344,119,343,119,341,116,340,117,336,118,336,119,335,117,334,116,333,114,333,112,333,112,332,109,330,107,330,106,329,106,327,103,326,100,327,100,330,101,331,99,333,96,333,93,336,91,339,88,340,89,342,86,345,84,346,81,346,78,349,74,351,71,350,68,350,66,350,64,349,63,347"/>
</map>


<script id="select_collegio" type="text/ng-template">
    SELECT
        count(distinct ?deputato) as ?count ?collegio
    WHERE {
        ?deputato a ocd:deputato; ocd:rif_leg <{{legislatura_uri}}>;
        ocd:rif_mandatoCamera ?mandato .
        ?mandato ocd:rif_elezione ?elezione .
        ?elezione dc:coverage ?collegio .
        FILTER NOT EXISTS{
            ?mandato ocd:endDate ?date
        }
    }
    GROUP BY
        ?collegio
</script>

<script id="select_deputato" type="text/ng-template">
    SELECT
        distinct ?deputato ?name ?partito ?collegio
    WHERE {
        ?deputato a ocd:deputato;
            ocd:rif_leg <{{legislatura_uri}}>;
            ocd:rif_mandatoCamera ?mandato;
            ocd:aderisce ?aderisce .

        ?persona ocd:rif_mandatoCamera ?mandato;
            a foaf:Person;
            dc:title ?name;
            foaf:gender ?gender .

        ?aderisce ocd:rif_gruppoParlamentare ?gruppo .
        ?gruppo <http://purl.org/dc/terms/alternative> ?partito .

        ?mandato ocd:rif_elezione ?elezione .
        ?elezione dc:coverage ?collegio .

        FILTER NOT EXISTS{
            ?mandato ocd:endDate ?date
        }
        MINUS{
            ?aderisce ocd:endDate ?fineAdesione
        }
    }
</script>
